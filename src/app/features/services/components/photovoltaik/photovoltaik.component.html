<!-- photovoltaik.component.html -->
<div class="service-detail-page">
    <!-- Intro Section -->
    <section class="service-intro">
        <div class="container">
            <div class="section-header">
                <h1>{{ titleWithCity }}</h1>
                <h2 class="subtitle">{{ subtitleWithCity }}</h2>
            </div>
            <div class="story-grid">
                <div class="story-content">
                    <p><strong>Wir liefern Ihnen mehr als nur eine PV-Anlage:</strong></p>
                    <p>
                        Als erfahrener Dachdecker- und Elektrofachbetrieb realisieren wir maßgeschneiderte
                        Photovoltaik-Systeme inklusive Stromspeicher und Wallbox
                        @if (city) {
                        in {{ city.name }} und der Region {{ city.region }}.
                        }
                    </p>

                    <p>{{ regionalText }}</p>

                    <p>
                        <strong>Alles aus einer Hand. Regional. Persönlich. Zuverlässig.</strong>
                    </p>


                    @if (city) {
                    <div class="local-stats-badge"
                        style="background: #f8f9fa; padding: 15px; border-left: 4px solid #ffc107; margin: 20px 0;">
                        <strong>Solar-Check {{ city.name }}:</strong>
                        <ul style="margin-bottom: 0;">
                            <li>Durchschnittliche Sonnenstunden: {{ city.solarHours }} h/Jahr</li>
                            <li>Region: {{ city.region }}</li>
                            <li>Eignung: Hervorragend für Speicher-Kombinationen</li>
                        </ul>
                    </div>
                    }
                </div>
                <div class="story-image">
                    <img src="assets/images/services/photovoltaik/solar_m.webp"
                        [alt]="'Photovoltaik Anlage in ' + (city?.name || 'der Region')" loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Alle anderen Sections bleiben unverändert bis zur CTA -->

    <section class="service-what-you-get">
        <div class="container">
            <div class="section-header">
                <h2>PV-Komplettservice @if(city){ in {{ city.name }} }</h2>
                <p class="subtitle">Von der Planung bis zum eigenen Strom in der Region {{ city?.region || 'Nahe-Glan'
                    }}</p>
            </div>

            <div class="service-cards-grid">
                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/photovoltaik/card1.jpg"
                            [alt]="'PV Planung' + (city ? ' ' + city.name : '')">
                    </div>
                    <div class="card-content">
                        <h3>Planung & Ertrag</h3>
                        <p>Individuelle Prognose und Wirtschaftlichkeits-Check für Ihr Dach @if(city){ in {{ city.name
                            }}}.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/photovoltaik/card2.webp"
                            [alt]="'PV Montage' + (city ? ' ' + city.region : '')">
                    </div>
                    <div class="card-content">
                        <h3>Profi-Montage</h3>
                        <p>Installation durch unser eigenes Team – fachgerecht und sicher für die Region {{ city?.region
                            || 'Nahe-Glan' }}.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/photovoltaik/card3.webp" [alt]="'PV Anmeldung Netzbetreiber'">
                    </div>
                    <div class="card-content">
                        <h3>Netz & Behörden</h3>
                        <p>Wir übernehmen die komplette Anmeldung beim lokalen Energieversorger @if(city){ in {{
                            city.name }}}.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/photovoltaik/card4.jpg"
                            [alt]="'Solar Speicher' + (city ? ' ' + city.name : '')">
                    </div>
                    <div class="card-content">
                        <h3>Speicher & Backup</h3>
                        <p>Moderne Speichersysteme für maximale Autarkie Ihres Hauses @if(city){ im Raum {{ city.region
                            }}}.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="service-process">
        <div class="container">
            <div class="section-header">
                <h2>Professionelle Überwachung & Wartung</h2>
                <h2 class="subtitle">Maximaler Ertrag durch kontinuierliche Betreuung</h2>
            </div>

            <div class="story-grid">
                <div class="story-image">
                    <img src="assets/images/services/photovoltaik/check.jpg" alt="Solaranlagen Prüfung" loading="lazy">
                </div>
                <div class="story-content">
                    <div class="process-list">
                        <div class="process-item">
                            <div class="item-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 12h-4l-3 9L9 3l-3 9H2"></path>
                                </svg>
                            </div>
                            <div class="item-content">
                                <h3>Anlagendiagnose</h3>
                                <p>Frühzeitige Erkennung von Ertragsabweichungen und Sensorfehlern</p>
                            </div>
                        </div>

                        <div class="process-item">
                            <div class="item-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path
                                        d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z">
                                    </path>
                                </svg>
                            </div>
                            <div class="item-content">
                                <h3>Technische Prüfung</h3>
                                <p>Identifikation und Behebung von Kabelproblemen und Verschattungen</p>
                            </div>
                        </div>

                        <div class="process-item">
                            <div class="item-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 11l3 3L22 4"></path>
                                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                                </svg>
                            </div>
                            <div class="item-content">
                                <h3>Anlagencheck</h3>
                                <p>Regelmäßige Prüfung auf Schäden durch Wetter, Tiere oder Umwelteinflüsse</p>
                            </div>
                        </div>

                        <div class="process-item">
                            <div class="item-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M9 11l3 3L22 4"></path>
                                    <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
                                </svg>
                            </div>
                            <div class="item-content">
                                <h3>Instandhaltung</h3>
                                <p>Reinigung, Sichtprüfung und Verschattungsanalyse der PV-Module</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="service-benefits">
        <div class="benefits-grid">
            <!-- Bild-Bereich (Links) -->
            <div class="benefits-image">
                <img src="assets/images/services/photovoltaik/bulp_m.webp" alt="Vorteile Photovoltaik"
                    class="benefits-img">
            </div>

            <!-- Content-Bereich (Rechts) - Dunkler Hintergrund -->
            <div class="benefits-content">
                <div class="content-wrapper">
                    <div class="section-header">
                        <h2>Warum DNG@if(city){ in {{ city.name }} }?</h2>
                        <p class="subtitle">Ihr Partner für Solartechnik & Dachhandwerk</p>
                    </div>

                    <div class="benefits-highlights">
                        <div class="highlight-item">
                            <h3>Beratung vor Ort</h3>
                            <p>Maßgeschneiderte Planung direkt bei Ihnen @if(city){ in {{ city.name }} } – individuell
                                auf Ihren Bedarf abgestimmt.</p>
                        </div>

                        <div class="highlight-item">
                            <h3>Eigenes Fachpersonal</h3>
                            <p>Eigene Monteure & Elektriker statt Subunternehmen. Alles aus einer Hand für maximale
                                Qualität.</p>
                        </div>

                        <div class="highlight-item">
                            <h3>Regionale Nähe</h3>
                            <p>Kurze Wege @if(city){ im Raum {{ city.region }} }, persönlicher Service und verlässliche
                                Termine ohne lange Wartezeit.</p>
                        </div>

                        <div class="highlight-item">
                            <h3>Komplett-Lösungen</h3>
                            <p>PV-Anlagen ideal kombinierbar mit Dachsanierung oder Fenstertausch – alles optimal
                                aufeinander abgestimmt.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="service-faqs">
        <div class="container">
            <h2>Häufig gestellte Fragen</h2>

            <div class="faq-list">
                @for (faq of faqs; track $index) {
                <div class="faq-item" [class.active]="faq.isOpen">
                    <button type="button" class="faq-question" (click)="toggleFaq($index)"
                        [attr.aria-expanded]="faq.isOpen" [attr.aria-controls]="'faq-answer-' + $index">
                        <span class="question-text">{{ faq.question }}</span>
                        <span class="faq-icon" [class.rotated]="faq.isOpen">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </span>
                    </button>

                    @if (faq.isOpen) {
                    <div class="faq-answer" [id]="'faq-answer-' + $index">
                        <p>{{ faq.answer }}</p>
                    </div>
                    }
                </div>
                }
            </div>
        </div>
    </section>

    <!-- CTA -->
    <section class="service-cta">
        <div class="container">
            <div class="cta-box">
                <h2>
                    @if (city) {
                    Interesse an einer PV-Anlage in {{ city.name }}?
                    } @else {
                    Interesse an einer PV-Anlage?
                    }
                </h2>
                <p>Kontaktieren Sie uns für eine kostenlose Vor-Ort-Beratung und ein unverbindliches Angebot.</p>
                <app-cta-button text="Jetzt Beratung anfragen" link="/kontakt" />
            </div>
        </div>
    </section>
</div>