<!-- src/app/features/services/components/dachsanierung/dachsanierung.component.html -->

<div class="service-detail-page">

    <!-- Intro Section -->
    <section class="service-intro">
        <div class="container">
            <div class="section-header">
                <h1>{{ titleWithCity }}</h1>
                <h2 class="subtitle">{{ subtitleWithCity }}</h2>
            </div>

            <div class="story-grid">
                <div class="story-content">
                    <p>
                        <strong>Ihr Dach ist in die Jahre gekommen?</strong><br>
                        Feuchtigkeit, Wärmeverluste oder lockere Ziegel sind deutliche Anzeichen für Sanierungsbedarf.
                    </p>

                    @if (regionalTextSanierung) {
                    <p>{{ regionalTextSanierung.intro }}</p>
                    <p><strong>{{ regionalTextSanierung.main }}</strong></p>
                    <p>{{ regionalTextSanierung.closing }}</p>
                    } @else {
                    <p>
                        Als erfahrener Meisterbetrieb sind wir im gesamten Raum <strong>Mainz, Bingen, Bad Kreuznach bis
                            nach Kaiserslautern</strong> für Sie unterwegs.
                        In diesem Einzugsgebiet realisieren wir fachgerechte Dachsanierungen, die Ästhetik mit moderner
                        Dämmtechnik vereinen.
                    </p>
                    <p>
                        Ob Einfamilienhaus oder Gewerbeobjekt: Wir sorgen dafür, dass Ihr Dach energetisch auf dem
                        neuesten Stand ist und den Wert Ihrer Immobilie langfristig steigert.
                    </p>
                    }

                    <p><strong>Alles aus einer Hand. Regional. Persönlich. Zuverlässig.</strong></p>

                    @if (city) {
                    <div class="local-trust-badge"
                        style="background: #f4f7ff; border: 1px solid #1e40af; padding: 12px; border-radius: 8px; margin: 15px 0;">
                        <p style="margin-bottom: 0;">
                            <strong>Sanierungs-Check {{ city.name }}:</strong> Wir beraten Sie vor Ort auch zu aktuellen
                            Fördermöglichkeiten für die Region {{ city.region }}.
                        </p>
                    </div>
                    }
                </div>
                <div class="story-image">
                    <img src="assets/images/services/dachsanierung_detail1.jpg" alt="Dachsanierung Detail"
                        loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Ursachen und typische Schäden -->
    <section class="service-reasons">
        <div class="container">
            <div class="section-header">
                <h2>Ursachen und typische Schäden am Dach</h2>
                <h2 class="subtitle">Früh erkennen, gezielt sanieren</h2>
            </div>

            <div class="story-grid">
                <div class="story-content">
                    <p>
                        Ein beschädigtes Dach beeinträchtigt nicht nur die Optik, sondern vor allem die Sicherheit und
                        Energieeffizienz Ihres Gebäudes.
                        Häufige Anzeichen für einen Sanierungsbedarf:
                    </p>
                    <ul class="bullet-list">
                        <li>Moos- oder Algenbefall, brüchige Ziegel</li>
                        <li>Undichtigkeiten &amp; Wassereintritt</li>
                        <li>Hoher Wärmeverlust durch mangelnde Dämmung</li>
                        <li>Schäden nach Sturm oder Hagel</li>
                        <li>Korrosion an Dachrinnen und Blechen</li>
                    </ul>
                    <div class="service-highlight">
                        <p><strong>Je früher Sie handeln, desto günstiger die Sanierung.</strong></p>
                    </div>
                </div>
                <div class="story-image">
                    <img src="assets/images/services/dachsanierung/dachsanierung_1.jpeg" alt="Dachsanierung"
                        loading="lazy">
                </div>
            </div>
        </div>
    </section>

    <!-- Unsere Leistungen Section -->
    <section class="service-what-you-get">
        <div class="container">
            <div class="section-header">
                <h2>Ihre Vorteile bei der Dachsanierung @if(city){ in {{ city.name }} }</h2>
                <p class="subtitle">Nachhaltiger Schutz und Wertsteigerung für Ihr Zuhause</p>
            </div>

            <div class="service-cards-grid">
                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/dachsanierung/card1.webp"
                            [alt]="'Wertsteigerung durch Dachsanierung' + (city ? ' in ' + city.name : '')"
                            loading="lazy">
                    </div>
                    <div class="card-content">
                        <h3>Wertsteigerung</h3>
                        <p>Erhöht Marktwert & Wohnqualität Ihrer Immobilie nachhaltig.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/dachsanierung/card2.webp"
                            [alt]="'Energetische Dachdämmung nach GEG' + (city ? ' im Raum ' + city.region : '')"
                            loading="lazy">
                    </div>
                    <div class="card-content">
                        <h3>Energieeffizienz</h3>
                        <p>Bis zu 30% Heizkosten sparen durch moderne Dämmung nach GEG.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/dachsanierung/card3.webp"
                            [alt]="'Dachabdichtung und Witterungsschutz'" loading="lazy">
                    </div>
                    <div class="card-content">
                        <h3>Dichtigkeit & Schutz</h3>
                        <p>Sicherer Schutz vor Witterung und teuren Feuchtigkeitsschäden.</p>
                    </div>
                </div>

                <div class="service-card">
                    <div class="card-image">
                        <img src="assets/images/services/dachsanierung/card4.webp"
                            [alt]="'Förderung für Dachsanierung' + (city ? ' in ' + city.name : '')" loading="lazy">
                    </div>
                    <div class="card-content">
                        <h3>Förderfähig</h3>
                        <p>Profitieren Sie von KfW-Zuschüssen & steuerlichen Boni.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Ablauf Section -->
    <section class="service-process">
        <div class="container">
            <div class="section-header">
                <h2>So läuft es ab</h2>
                <h2 class="subtitle">Schritt für Schritt zu Ihrer Lösung</h2>
            </div>

            <div class="process-grid">
                <div class="process-item">
                    <div class="step-number">1</div>
                    <div class="step-text">
                        <p>Vor-Ort-Besichtigung &amp; Beratung.</p>
                        <p>Wir begutachten den Zustand Ihres Daches und klären mögliche Maßnahmen.</p>
                    </div>
                </div>
                <div class="process-item">
                    <div class="step-number">2</div>
                    <div class="step-text">
                        <p>Individuelles Angebot und Planung.</p>
                        <p>Auf Wunsch mit verschiedenen Materialoptionen.</p>
                    </div>
                </div>
                <div class="process-item">
                    <div class="step-number">3</div>
                    <div class="step-text">
                        <p>Rückbau und Entsorgung</p>
                        <p>Fachgerechte Entfernung alter Eindeckung inkl. umweltfreundlicher Entsorgung.</p>
                    </div>
                </div>
                <div class="process-item">
                    <div class="step-number">4</div>
                    <div class="step-text">
                        <p>Neueindeckung und Dämmung</p>
                        <p>Ziegel, Dachsteine, Schiefer oder Metall passend zum Hausstil und Budget.</p>
                    </div>
                </div>
                <div class="process-item">
                    <div class="step-number">5</div>
                    <div class="step-text">
                        <p>Abschlusskontrolle und Abnahme</p>
                        <p>Inklusive Übergabeprotokoll und Fotodokumentation.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="service-faqs">
        <div class="container">
            <h2>Häufig gestellte Fragen</h2>

            <div class="faq-list">
                @for (faq of faqs; track $index) {
                <div class="faq-item" [class.active]="faq.isOpen">
                    <button type="button" class="faq-question" (click)="toggleFaq($index)"
                        [attr.aria-expanded]="faq.isOpen" [attr.aria-controls]="'faq-answer-' + $index">
                        <span class="question-text">{{ faq.question }}</span>
                        <span class="faq-icon" [class.rotated]="faq.isOpen">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="6 9 12 15 18 9"></polyline>
                            </svg>
                        </span>
                    </button>

                    @if (faq.isOpen) {
                    <div class="faq-answer" [id]="'faq-answer-' + $index">
                        <p>{{ faq.answer }}</p>
                    </div>
                    }
                </div>
                }
            </div>
        </div>
    </section>

    <!-- CTA Section -->
    <section class="service-cta">
        <div class="container">
            <div class="cta-box">
                <h2>
                    @if (city) {
                    Interesse an einer Dachsanierung in {{ city.name }}?
                    } @else {
                    Interesse an einer Dachsanierung?
                    }
                </h2>
                <p>Kontaktieren Sie uns für eine kostenlose Beratung und ein unverbindliches Angebot.</p>
                <app-cta-button text="Jetzt Kontakt aufnehmen" link="/kontakt" />
            </div>
        </div>
    </section>

</div>